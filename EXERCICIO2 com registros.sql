CREATE DATABASE IF NOT EXISTS BDEX2_PASSAGENS_AEREAS;
USE BDEX2_PASSAGENS_AEREAS;



CREATE TABLE IF NOT EXISTS PASSAGEIROS(
COD_PASSAGEIRO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
DATA_NASC DATE NOT NULL,
NACIONALIDADE VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS AEROPORTOS(
ID_AEROPORTO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
CIDADE VARCHAR(100) NOT NULL,
ESTADO VARCHAR(100) NOT NULL,
PAIS VARCHAR(100) NOT NULL,
LATITUDE VARCHAR(50) NOT NULL,
LONGITUDE VARCHAR(50) NOT NULL,
TAMANHO_PISTA DECIMAL(20,1) NOT NULL
);

CREATE TABLE IF NOT EXISTS CIA_AEREAS(
ID_CIA INT PRIMARY KEY,
CNPJ VARCHAR(20) NOT NULL,
NOME_FANTASIA VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS RESERVAS(
ID_RESERVA INT PRIMARY KEY,
DATA_RESERVA DATE NOT NULL,
FORMA_PGTO ENUM("DINHEIRO","PIX","DEBITO","CREDITO") NOT NULL,
VALOR_RESERVA DECIMAL(10,2) NOT NULL
);

CREATE TABLE IF NOT EXISTS AERONAVES(
PFX_AERO VARCHAR(20) PRIMARY KEY,
MODELO VARCHAR(50) NOT NULL,
ANO_FABR YEAR NOT NULL,
FABRICANTE VARCHAR(50) NOT NULL,
POLTRONAS INT NOT NULL,
CIA_AEREA INT NOT NULL,
CONSTRAINT CIA_AERO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA));


CREATE TABLE IF NOT EXISTS VOOS(
ID_VOO INT,
ASSENTO VARCHAR(10),
AERO_PART INT NOT NULL,
DATA_PART DATE NOT NULL,		
HORA_PART TIME NOT NULL,
AERO_CHEG INT NOT NULL,
DATA_CHEG DATE NOT NULL,
HORA_CHEG TIME NOT NULL,
AERONAVE VARCHAR(20) NOT NULL,
CIA_AEREA INT NOT NULL,
PRIMARY KEY(ID_VOO,ASSENTO),
CONSTRAINT AEROP_VOO1 FOREIGN KEY(AERO_PART) REFERENCES AEROPORTOS(ID_AEROPORTO),
CONSTRAINT AEROP_VOO2 FOREIGN KEY(AERO_CHEG) REFERENCES AEROPORTOS(ID_AEROPORTO),  
CONSTRAINT AERON_VOO FOREIGN KEY(AERONAVE) REFERENCES AERONAVES(PFX_AERO),
CONSTRAINT CIA_VOO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA));

CREATE TABLE IF NOT EXISTS VOOS_RESERVAS(
ID_VOO INT,
ASSENTO VARCHAR(10),
ID_RESERVA INT,
PRIMARY KEY(ID_VOO,ASSENTO,ID_RESERVA),
CONSTRAINT VR1 FOREIGN KEY(ID_VOO,ASSENTO) REFERENCES VOOS(ID_VOO,ASSENTO),
CONSTRAINT VR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA)
);

CREATE TABLE IF NOT EXISTS PASSAGEIROS_RESERVAS(
PASSAGEIRO INT,
ID_RESERVA INT,
PRIMARY KEY(PASSAGEIRO,ID_RESERVA),
CONSTRAINT PR1 FOREIGN KEY(PASSAGEIRO) REFERENCES PASSAGEIROS(COD_PASSAGEIRO),
CONSTRAINT PR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA));

INSERT INTO PASSAGEIROS (COD_PASSAGEIRO, NOME, SOBRENOME, DATA_NASC, NACIONALIDADE) VALUES
('1', 'João', 'Silva', '1990-05-15', 'Brasileira'),
('2', 'Maria', 'Santos', '1985-08-20', 'Brasileira'),
('3', 'Pedro', 'Oliveira', '1995-12-10', 'Portuguesa'),
('4', 'Ana', 'Pereira', '2000-07-07', 'Portuguesa');

INSERT INTO AEROPORTOS (ID_AEROPORTO, NOME, CIDADE, ESTADO, PAIS, LATITUDE, LONGITUDE, TAMANHO_PISTA) VALUES
('1', 'Aeroporto JFK', 'Nova York', 'NY', 'Estados Unidos', '40.6413', '-73.7781', '4000.5'),
('2', 'Aeroporto de Guarulhos', 'São Paulo', 'SP', 'Brasil', '-23.4323', '46.4692', '3800.0'),
('3', 'Aeroporto de Congonhas', 'São Paulo', 'SP', 'Brasil', '-23.6264', '-46,6563', '2800.0'),
('4', 'Aeroporto de Los Angeles', 'Los Angeles', 'CA', 'Estados Unidos', '33.9416', '-118.4085', '3500.0'),
('5', 'Aeroporto de Miami', 'Miami', 'FL', 'Estados Unidos', '25.7933', '-80.2906', '3200.0');

INSERT INTO CIA_AEREAS (ID_CIA, CNPJ, NOME_FANTASIA) VALUES
('1', '12345678901234', 'Azul Linhas Aéreas'),
('2', '98765432109876', 'LATAM Airlines'),
('3', '45678901234567', 'Gol Transportes Aéreos'),
('4', '78901234567890', 'Avianca Brasil'),
('5', '23456789012345', 'Emirates');

INSERT INTO RESERVAS (ID_RESERVA, DATA_RESERVA, FORMA_PGTO, VALOR_RESERVA) VALUES
('1', '2024-05-01', 'DINHEIRO', '1500.00'),
('2', '2024-05-03', 'DEBITO', '200.50'),
('3', '2024-05-05', 'CREDITO', '1000.00'),
('4', '2024-05-08', 'PIX', '750.75'),
('5', '2024-05-10', 'DINHEIRO', '300.00');

INSERT INTO AERONAVES (PFX_AERO, MODELO, ANO_FABR, FABRICANTE, POLTRONAS, CIA_AEREA) VALUES
('PR-AAA', 'Airbus A320', '2015', 'Airbus', '180', '1'),
('PT-BBB', 'Boeing 737', '2010', 'Boeing', '160', '2'),
('PP-CCC', 'Embraer E195', '2018', 'Embraer', '120', '3'),
('PT-DDD', 'Airbus A330', '2014', 'Airbus', '250', '4'),
('PR-EEE', 'Boeing 787', '2017', 'Boeing', '290', '5');

INSERT INTO VOOS(ID_VOO, ASSENTO, AERO_PART, DATA_PART, HORA_PART, AERO_CHEG, DATA_CHEG, HORA_CHEG, AERONAVE, CIA_AEREA) VALUES
('1', 'A1', '3', '2024-05-01', '08:00:00', '1', '2024-05-01', '10:30:00', 'PR-AAA', '1'),
('1', 'A2', '3', '2024-05-01', '08:00:00', '1', '2024-05-01', '10:30:00', 'PR-AAA', '1'),
('2', 'B1', '1', '2024-05-03', '12:00:00', '2', '2024-05-03', '15:30:00', 'PT-BBB', '2'),
('2', 'B2', '1', '2024-05-03', '12:00:00', '2', '2024-05-03', '15:30:00', 'PT-BBB', '2'),
('3', 'C1', '2', '2024-05-05', '10:30:00', '3', '2024-05-05', '13:45:00', 'PP-CCC', '3'),
('3', 'C2', '2', '2024-05-05', '10:30:00', '3', '2024-05-05', '13:45:00', 'PP-CCC', '3'),
('4', 'D1', '4', '2024-05-08', '15:45:00', '5', '2024-05-08', '19:00:00', 'PT-DDD', '4'),
('4', 'D2',	'4', '2024-05-08', '15:45:00', '5',	'2024-05-08', '19:00:00', 'PT-DDD',	'4'),
('5', 'E1',	'5', '2024-05-10', '09:30:00', '1',	'2024-05-10', '12:15:00', 'PR-EEE',	'5'),
('5', 'E2',	'5', '2024-05-10', '09:30:00', '1',	'2024-05-10', '12:15:00', 'PR-EEE',	'5');

INSERT INTO VOOS_RESERVAS(ID_VOO, ASSENTO, ID_RESERVA) VALUES
('1', 'A1',	'1'),
('1', 'A2',	'2'),
('2', 'B1',	'3'),
('2', 'B2',	'4'),
('3', 'C1',	'5'),
('3', 'C2',	'6'),
('4', 'D1',	'7'),
('4', 'D2',	'8'),
('5', 'E1',	'9'),
('5', 'E2',	'10');

INSERT INTO PASSAGEIROS_RESERVAS(PASSAGEIRO, ID_RESERVA) VALUES
('1', '1'),
('2', '2'),
('3', '3'),
('4', '4'),
('5', '5'),
('1', '6'),
('2', '7'),
('3', '8'),
('4', '9'),
('5', '10');